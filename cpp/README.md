Installation
============

This instruction explains how to install Polem on a Linux machine.

Polem is provided as a source code package and must be compiled. The build system is based on CMake.
Builded system provides executable that is installed to bin folder and shared library libpolem-dev.so that can be used in
C/C++.
Requirements

Before running the build system, you need to ensure you have the following libraries installed with headers.

* Corpus2 and Pwrutils libraries from the corpus2 git repository (the standard CMake buildprocess for Corpus2 also installs Pwrutils)
* Morfeusz2 builded with NKJP tagset (see below)
* Boost (tested with 1.58)
* ICU library (tested with 55.1; Ubuntu package libicu-dev)
* CMake 2.8 or later (Ubuntu package cmake)


Installation of Polem
---------------------

Having installed the dependencies, install Polem:

```bash
mkdir polem/cpp/build
cd polem/cpp/build
cmake ..
sudo make
sudo make install
```


Morfeusz2 builded with NKJP tagset installation
-----------------------------------------------

1. Download
   * Morfeusz 2 ver. 20.11.2014 - http://sgjp.pl/morfeusz/download/20141120/morfeusz-src-20141120.tar.gz
   * Dictionary -  http://sgjp.pl/morfeusz/download/20141120/sgjp-20141120.tab.gz
   * zip with script to process tagset and dictionary and files segmenty.dat and cmakelists.txt to overwrite - http://nlp.pwr.edu.pl/redmine/attachments/download/2566/dict_unfold.py

2. Use dict_unfold script on sgjp-20141120.tab dictionary
   * python2 dict_unfold.py sgjp-20141120
   
3. Replace files in morfeusz extraction folder/trunk/input with downloaded one (segmenty.dat and Cmakelists.txt)

4. While building morfeusz input dictionary and tagset generated by script (2.) :
```bash
cmake -D INPUT_DICTIONARIES=/home/gkubon/Downloads/morfi/sgjp-20141120.new.tab \
-D DEFAULT_DICT_NAME=unfolded -D INPUT_TAGSET=/home/gkubon/Downloads/morfi/sgjp-20141120.new.tagset ..
```

5. ```make```

6. ```sudo make install```



API Overview
============

To use a lemmatizer in code include CascadeLemmatizer.h.

CascadeLemmatizer.h

```cpp
static CascadeLemmatizer::assembleLemmatizer() :
Static function that creates different lemmatizers and connect them together into CascadeLemmatizer object.
```

UnicodeString lemmatize(UnicodeString kwrd_orth, UnicodeString kwrd_base, UnicodeString kwrd_ctag, UnicodeString kwrd_spaces, std::string category) :
Function that takes orth, base, ctag, spaces and category of a phrase to find and return lemmatised phrase.
If lemmatised phrase can't be found, function return orth (1st parameter). Spaces parameter determines if there is a space in phrase after each word.
Spaces and category are optional. lemmatize function can be run with first three or four parameters.

Example usage :

```cpp
CascadeLemmatizer lemmatizer = CascadeLemmatizer::assembleLemmatizer();

UnicodeString lemma = lemmatizer.lemmatize("Lidze światowej","liga światowy","subst:sg:loc:f adj:sg:loc:f:pos","True False","nam_eve_human_sport");

UnicodeString lemma1 = lemmatizer.lemmatize("Lidze światowej","liga światowy","subst:sg:loc:f adj:sg:loc:f:pos","True False");

UnicodeString lemma2 = lemmatizer.lemmatize("Lidze światowej","liga światowy","subst:sg:loc:f adj:sg:loc:f:pos");
```

There is FindPolem.cmake script provided in ```polem/cpp/cmake/Modules/``` that can be used while using library in own code.

Example ```CMakeLists.txt``` that uses lemmatizer  :

```cmake
cmake_minimum_required(VERSION 2.8)

project(example)

set(CMAKE_CXX_STANDARD 11)
set(CMAKE_MODULE_PATH ${CMAKE_MODULE_PATH} "${PROJECT_SOURCE_DIR}/cmake/Modules")

include(LibFindMacros)

find_package(Corpus2 REQUIRED)
include_directories(${Corpus2_INCLUDE_DIRS})
set(LIBS ${LIBS} ${Corpus2_LIBRARY})

find_package(ICU REQUIRED)
include_directories(${ICU_INCLUDE_DIRS})
set(LIBS ${LIBS} ${ICU_LIBRARIES})
set(LIBS ${LIBS} ${ICU_I18N_LIBRARIES})

find_library(WCCL_LIBRARY wccl /usr/lib/ /usr/local/lib/)
find_path(WCCL_INCLUDE_DIR libwccl /usr/lib/ /usr/local/lib)
if(WCCL_LIBRARY AND WCCL_INCLUDE_DIR)
    message("-- Found WCCL libraries: " ${WCCL_LIBRARY})
    include_directories(${WCCL_INCLUDE_DIR})
    set(LIBS ${LIBS} ${WCCL_LIBRARY})
endif(WCCL_LIBRARY AND WCCL_INCLUDE_DIR)

find_package(Morfeusz2 REQUIRED)
include_directories(${MORFEUSZ2_INCLUDE_DIR})
set(LIBS ${LIBS} ${MORFEUSZ2_LIBRARY})

find_package(PwrUtils REQUIRED)
include_directories(${PwrUtils_INCLUDE_DIRS})
set(LIBS ${LIBS} ${PwrUtils_LIBRARIES})
set(LIBS ${LIBS} ${PwrUtils_LIBRARY})

find_package(Boost REQUIRED)
include_directories(${Boost_INCLUDE_DIRS})
set(LIBS ${LIBS} ${Boost_LIBRARIES})

find_package(Polem REQUIRED)
include_directories(${Polem_INCLUDE_DIR})
set(LIBS ${LIBS} ${Polem_LIBRARY})

set(SOURCE_FILES ${CMAKE_CURRENT_SOURCE_DIR}/main.cpp)

add_executable(example ${SOURCE_FILES} ${LIBS})
link_libraries(example ${LIBS})
```